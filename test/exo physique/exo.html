<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <p>
        Malheureusement cette partie du musée est innondée, vous devrez faire des mouvements de natation pendant au moins 30 secondes.
    </p>
    <br>
    <div id="timer">
    <button id="btn" onclick="beginTimer()">Commencer l'épreuve</button>
    </div>
    <progress id="progress" value="0" max="100"></progress>
    <script>
        const departMinutes = 0;
        const departSecondes = 30;
        const tempsDepart = departMinutes * 60 + departSecondes;
        let temps = departMinutes * 60 + departSecondes;

        function beginTimer() {
            let timer = null;
            let minutes = 0;
            let secondes = 0;
            let timerElement = document.getElementById("timer");

            timer = setInterval(() => {
                minutes = parseInt(temps / 60, 10)
                secondes = parseInt(temps % 60, 10)

                minutes = minutes < 10 ? "0" + minutes : minutes
                secondes = secondes < 10 ? "0" + secondes : secondes

                timerElement.innerHTML = `${minutes}:${secondes}`
                document.getElementById("progress").value = 100 - (temps / tempsDepart) * 100;
                temps = temps <= 0 ? endTimer() : temps - 1;
            }, 1000)

            function endTimer() {
                clearInterval(timer);
                timer = null;
                progressInterval = null;
                timerElement.innerHTML = "Terminé !"
            }
        }
    </script>
</body>
</html>